{"$schema":"https://dataexplorer.azure.com/static/d/schema/22/dashboard.json","id":"f374e6cb-3155-4c62-8331-e5ad4363914f","eTag":"Zbb2+BOQmqqF8OnQtr6Z1A==","title":"OEEE Dashboard","tiles":[{"id":"1c334873-5118-4312-ac10-7c9a5a17c905","title":"Total Parts Made","query":"boltmaker\n| where plantName == (['PlantName'])\n| where productionLine == (['ProductionLine']) \n| where shiftNumber == (['ShiftNumber'])\n| where messageTimestamp between (['_startTime'] .. ['_endTime']) \n| summarize totalpartsmade = sum(round(totalPartsMade,2))","dataSourceId":"a02cb359-5c59-494a-83f1-f1f944765ab6","visualType":"card","pageId":"ad90b412-c0d6-47b5-a71d-91f423dfcbc8","layout":{"x":0,"y":6,"width":4,"height":3},"usedParamVariables":["PlantName","ProductionLine","ShiftNumber","_endTime","_startTime"],"visualOptions":{"hideTileTitle":false,"multiStat__textSize":"large","multiStat__valueColumn":{"type":"infer"},"colorRulesDisabled":false,"colorRules":[{"id":"c4d06b61-b08a-4ffb-9b58-dd1e08f26a93","column":{"type":"infer"},"conditions":[{"value":"0","operator":"=="}],"color":"red","indicator":{"kind":"text","text":{"type":"infer"}}},{"id":"d2aebb51-45e5-46ab-9b3e-2a15d538a393","column":{"type":"infer"},"conditions":[{"operator":">","value":"0"}],"color":"green","indicator":{"kind":"text","text":{"type":"infer"}}}],"colorStyle":"light"}},{"id":"a375335b-ff16-4eb0-bc60-631292a54f79","title":"Parts Made Chart","query":"let StartTime = ago(1d);\nlet StopTime = floor(now(),1d);\nboltmaker\n| where plantName == (['PlantName'])\n| where productionLine == (['ProductionLine']) \n| where shiftNumber == (['ShiftNumber'])\n| where messageTimestamp between (['_startTime'] .. ['_endTime']) \n| project messageTimestamp, totalPartsMade ","dataSourceId":"a02cb359-5c59-494a-83f1-f1f944765ab6","visualType":"line","pageId":"ad90b412-c0d6-47b5-a71d-91f423dfcbc8","layout":{"x":4,"y":6,"width":10,"height":7},"usedParamVariables":["PlantName","ProductionLine","ShiftNumber","_endTime","_startTime"],"visualOptions":{"hideTileTitle":false,"multipleYAxes":{"base":{"id":"-1","label":"Total Parts Made","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[]},"hideLegend":false,"xColumnTitle":"Date Time","xColumn":{"type":"infer"},"yColumns":{"type":"infer"},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"crossFilter":[]}},{"id":"b1057ac9-49b8-4635-b071-f5c3f017deeb","title":"Oil Level","query":"boltmaker\n| where plantName == (['PlantName'])\n| where productionLine == (['ProductionLine']) \n| where shiftNumber == (['ShiftNumber'])\n| where messageTimestamp between (['_startTime'] .. ['_endTime']) \n| project messageTimestamp, oilLevel","dataSourceId":"a02cb359-5c59-494a-83f1-f1f944765ab6","visualType":"line","pageId":"ad90b412-c0d6-47b5-a71d-91f423dfcbc8","layout":{"x":4,"y":27,"width":8,"height":7},"usedParamVariables":["PlantName","ProductionLine","ShiftNumber","_endTime","_startTime"],"visualOptions":{"hideTileTitle":false,"multipleYAxes":{"base":{"id":"-1","label":"Oil Level","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[]},"hideLegend":false,"xColumnTitle":"Date Time","xColumn":{"type":"infer"},"yColumns":{"type":"infer"},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"crossFilter":[]}},{"id":"1f7c732f-702e-4756-ab06-03a8882a12f4","title":"Peak Oil Level","query":"boltmaker\n| where plantName == (['PlantName'])\n| where productionLine == (['ProductionLine']) \n| where shiftNumber == (['ShiftNumber'])\n| where messageTimestamp between (['_startTime'] .. ['_endTime']) \n| summarize oillevel = max(round(oilLevel,2))","dataSourceId":"a02cb359-5c59-494a-83f1-f1f944765ab6","visualType":"card","pageId":"ad90b412-c0d6-47b5-a71d-91f423dfcbc8","layout":{"x":0,"y":19,"width":4,"height":3},"usedParamVariables":["PlantName","ProductionLine","ShiftNumber","_endTime","_startTime"],"visualOptions":{"hideTileTitle":false,"multiStat__textSize":"large","multiStat__valueColumn":{"type":"infer"},"colorRulesDisabled":false,"colorRules":[{"id":"a98eda21-1741-4bb3-9658-a50d7fbb147d","column":{"type":"infer"},"conditions":[{"operator":">","value":"24"}],"color":"green","indicator":{"kind":"text","text":{"type":"infer"}}},{"id":"996ccf94-c584-4047-ae0b-f57448f67615","column":{"type":"infer"},"conditions":[{"operator":"<","value":"24"},{"operator":">","value":"10"}],"color":"yellow","indicator":{"kind":"text","text":{"type":"infer"}}},{"id":"7f4559bd-4610-4032-a95a-3e4e9b7f6bf7","column":{"type":"infer"},"conditions":[{"operator":"<","value":"10"}],"color":"red","indicator":{"kind":"text","text":{"type":"infer"}}}],"colorStyle":"light"}},{"id":"ca16b55a-ddf9-4998-b16d-aea11fc8b4e5","title":"Lowest Oil Level","query":"boltmaker\n| where plantName == (['PlantName'])\n| where productionLine == (['ProductionLine']) \n| where shiftNumber == (['ShiftNumber'])\n| where messageTimestamp between (['_startTime'] .. ['_endTime']) \n| summarize oillevel = min(round(oilLevel,2))","dataSourceId":"a02cb359-5c59-494a-83f1-f1f944765ab6","visualType":"card","pageId":"ad90b412-c0d6-47b5-a71d-91f423dfcbc8","layout":{"x":0,"y":22,"width":4,"height":4},"usedParamVariables":["PlantName","ProductionLine","ShiftNumber","_endTime","_startTime"],"visualOptions":{"hideTileTitle":false,"multiStat__textSize":"large","multiStat__valueColumn":{"type":"infer"},"colorRulesDisabled":false,"colorRules":[{"id":"20df1a58-60f8-411c-97c0-c6d15c31250e","column":{"type":"infer"},"conditions":[{"operator":"<","value":"10"}],"color":"red","indicator":{"kind":"text","text":{"type":"infer"}}},{"id":"ce396083-80f8-4bd0-b001-38795e20fb18","column":{"type":"infer"},"conditions":[{"operator":"<","value":"60"}],"color":"yellow","indicator":{"kind":"text","text":{"type":"infer"}}}],"colorStyle":"bold"}},{"id":"c26b1f6e-15b8-4de2-b6db-fc2e09394a96","title":"Temperature","query":"let StartTime = ago(1d);\nlet StopTime = floor(now(),1d);\nboltmaker\n| where plantName == (['PlantName'])\n| where productionLine == (['ProductionLine']) \n| where shiftNumber == (['ShiftNumber'])\n| where messageTimestamp between (['_startTime'] .. ['_endTime']) \n| project messageTimestamp, temperature","dataSourceId":"a02cb359-5c59-494a-83f1-f1f944765ab6","visualType":"line","pageId":"ad90b412-c0d6-47b5-a71d-91f423dfcbc8","layout":{"x":4,"y":20,"width":8,"height":7},"usedParamVariables":["PlantName","ProductionLine","ShiftNumber","_endTime","_startTime"],"visualOptions":{"hideTileTitle":false,"multipleYAxes":{"base":{"id":"-1","label":"Oil Level","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[]},"hideLegend":false,"xColumnTitle":"Date Time","xColumn":{"type":"infer"},"yColumns":{"type":"infer"},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"crossFilter":[]}},{"id":"e3e18969-f47f-4e16-a1d2-9b38e03629eb","title":"Max Temperature","query":"boltmaker\n| where plantName == (['PlantName'])\n| where productionLine == (['ProductionLine']) \n| where shiftNumber == (['ShiftNumber'])\n| where messageTimestamp between (['_startTime'] .. ['_endTime']) \n| summarize oillevel = max(round(temperature,2))","dataSourceId":"a02cb359-5c59-494a-83f1-f1f944765ab6","visualType":"card","pageId":"ad90b412-c0d6-47b5-a71d-91f423dfcbc8","layout":{"x":0,"y":16,"width":4,"height":3},"usedParamVariables":["PlantName","ProductionLine","ShiftNumber","_endTime","_startTime"],"visualOptions":{"hideTileTitle":false,"multiStat__textSize":"large","multiStat__valueColumn":{"type":"infer"},"colorRulesDisabled":false,"colorRules":[{"id":"a98eda21-1741-4bb3-9658-a50d7fbb147d","column":{"type":"infer"},"conditions":[{"operator":">","value":"0"}],"color":"green","indicator":{"kind":"text","text":{"type":"infer"}}},{"id":"7f4559bd-4610-4032-a95a-3e4e9b7f6bf7","column":{"type":"infer"},"conditions":[{"operator":"<","value":"0"}],"color":"red","indicator":{"kind":"text","text":{"type":"infer"}}}],"colorStyle":"light"}},{"id":"031182c6-76e9-46b9-a81d-66897908bf34","title":"Downtime ","query":"let StartTime = ago(1d);\nlet StopTime = floor(now(),1d);\nboltmaker\n| where plantName == (['PlantName'])\n| where productionLine == (['ProductionLine']) \n| where shiftNumber == (['ShiftNumber'])\n| where messageTimestamp between (['_startTime'] .. ['_endTime']) \n  and machineHealth == 'Error'\n| summarize downtime = count()\n| project strcat(tostring(downtime), \" minutes\") ;","dataSourceId":"a02cb359-5c59-494a-83f1-f1f944765ab6","visualType":"card","pageId":"ad90b412-c0d6-47b5-a71d-91f423dfcbc8","layout":{"x":15,"y":3,"width":4,"height":3},"usedParamVariables":["PlantName","ProductionLine","ShiftNumber","_endTime","_startTime"],"visualOptions":{"hideTileTitle":false,"multiStat__textSize":"large","multiStat__valueColumn":{"type":"infer"},"colorRulesDisabled":false,"colorRules":[{"id":"c4d06b61-b08a-4ffb-9b58-dd1e08f26a93","column":{"type":"infer"},"conditions":[{"value":"0","operator":"<="}],"color":"green","indicator":{"kind":"text","text":{"type":"infer"}}},{"id":"d2aebb51-45e5-46ab-9b3e-2a15d538a393","column":{"type":"infer"},"conditions":[{"operator":">","value":"0"}],"color":"red","indicator":{"kind":"text","text":{"type":"infer"}}}],"colorStyle":"light"}},{"id":"30553f09-800a-4f25-9da6-e2b3ac39ff84","title":"Uptime - Unhealthy state","query":"boltmaker\n| where plantName == (['PlantName'])\n| where productionLine == (['ProductionLine']) \n| where shiftNumber == (['ShiftNumber'])\n| where messageTimestamp between (['_startTime'] .. ['_endTime']) \n| where machineHealth == 'Warning'\n| summarize downtime = count()\n| project strcat(tostring(downtime), \" minutes\") ;","dataSourceId":"a02cb359-5c59-494a-83f1-f1f944765ab6","visualType":"card","pageId":"ad90b412-c0d6-47b5-a71d-91f423dfcbc8","layout":{"x":10,"y":3,"width":5,"height":3},"usedParamVariables":["PlantName","ProductionLine","ShiftNumber","_endTime","_startTime"],"visualOptions":{"hideTileTitle":false,"multiStat__textSize":"large","multiStat__valueColumn":{"type":"infer"},"colorRulesDisabled":false,"colorRules":[{"id":"c4d06b61-b08a-4ffb-9b58-dd1e08f26a93","column":{"type":"infer"},"conditions":[{"value":"0","operator":"<="}],"color":"green","indicator":{"kind":"text","text":{"type":"infer"}}},{"id":"d2aebb51-45e5-46ab-9b3e-2a15d538a393","column":{"type":"infer"},"conditions":[{"operator":">","value":"0"}],"color":"yellow","indicator":{"kind":"text","text":{"type":"infer"}}}],"colorStyle":"light"}},{"id":"9d07f11e-7c3e-49d7-b3e5-8f205ad1bf97","title":"Uptime - Healthy state","query":"boltmaker\n| where plantName == (['PlantName'])\n| where productionLine == (['ProductionLine']) \n| where shiftNumber == (['ShiftNumber'])\n| where messageTimestamp between (['_startTime'] .. ['_endTime']) \n| where machineHealth == 'Healthy'\n| summarize downtime = count()\n| project strcat(tostring(downtime), \" minutes\") ;","dataSourceId":"a02cb359-5c59-494a-83f1-f1f944765ab6","visualType":"card","pageId":"ad90b412-c0d6-47b5-a71d-91f423dfcbc8","layout":{"x":5,"y":3,"width":5,"height":3},"usedParamVariables":["PlantName","ProductionLine","ShiftNumber","_endTime","_startTime"],"visualOptions":{"hideTileTitle":false,"multiStat__textSize":"large","multiStat__valueColumn":{"type":"infer"},"colorRulesDisabled":false,"colorRules":[{"id":"c4d06b61-b08a-4ffb-9b58-dd1e08f26a93","column":{"type":"infer"},"conditions":[{"value":"0","operator":">"}],"color":"green","indicator":{"kind":"text","text":{"type":"infer"}}},{"id":"d2aebb51-45e5-46ab-9b3e-2a15d538a393","column":{"type":"infer"},"conditions":[{"value":"0","operator":"<="}],"color":"yellow","indicator":{"kind":"text","text":{"type":"infer"}}}],"colorStyle":"light"}},{"id":"e6e53b9a-bdad-46e8-bc1c-30c69d8efc43","title":"Availability","query":"let PlannedProductionTimecalc = boltmaker\n| where plantName == (['PlantName'])\n| where productionLine == (['ProductionLine']) \n| where shiftNumber == (['ShiftNumber'])\n| where messageTimestamp between (['_startTime'] .. ['_endTime']) \n| where machineHealth == 'Healthy'\n| count | extend  CommonCol=\"Dummy\" \n| project CommonCol, PlannedProductionTime = Count;\nlet StoppedProductionTimeCalc = boltmaker\n| where plantName == (['PlantName'])\n| where productionLine == (['ProductionLine']) \n| where shiftNumber == (['ShiftNumber'])\n| where messageTimestamp between (['_startTime'] .. ['_endTime']) \n| where machineHealth == 'Error'\n| count | extend  CommonCol=\"Dummy\" \n| project CommonCol, StoppedProductionTime = Count;\nlet totalRecords  = PlannedProductionTimecalc   \n| join StoppedProductionTimeCalc on CommonCol  \n| extend Availability = iff(PlannedProductionTime>0,round((PlannedProductionTime -  StoppedProductionTime)*100/PlannedProductionTime),0.00)\n| project Availability;  \ntotalRecords\n| project strcat(tostring(Availability), \"%\") ;","dataSourceId":"a02cb359-5c59-494a-83f1-f1f944765ab6","visualType":"card","pageId":"ad90b412-c0d6-47b5-a71d-91f423dfcbc8","layout":{"x":15,"y":0,"width":4,"height":3},"usedParamVariables":["PlantName","ProductionLine","ShiftNumber","_endTime","_startTime"],"visualOptions":{"hideTileTitle":false,"multiStat__textSize":"large","multiStat__valueColumn":{"type":"infer"},"colorRulesDisabled":false,"colorRules":[{"id":"da10bbb3-7603-4733-ab8e-7eb149016c39","column":{"type":"infer"},"conditions":[{"operator":"<","value":"90"}],"color":"red","indicator":{"kind":"text","text":{"type":"infer"}}},{"id":"b2fc84c0-8f73-4559-99a0-8291e365b910","column":{"type":"infer"},"conditions":[{"operator":">","value":"90"}],"color":"green","indicator":{"kind":"text","text":{"type":"infer"}}}],"colorStyle":"light"}},{"id":"afb24313-7309-44df-a468-e606929d4436","title":"Defective Parts Made","query":"let StartTime = ago(1d);\nlet StopTime = floor(now(),1d);\nboltmaker\n| where plantName == (['PlantName'])\n| where productionLine == (['ProductionLine']) \n| where shiftNumber == (['ShiftNumber'])\n| where messageTimestamp between (['_startTime'] .. ['_endTime']) \n| summarize defectivePartsMade = sum(round(defectivePartsMade,2))","dataSourceId":"a02cb359-5c59-494a-83f1-f1f944765ab6","visualType":"card","pageId":"ad90b412-c0d6-47b5-a71d-91f423dfcbc8","layout":{"x":0,"y":9,"width":4,"height":4},"usedParamVariables":["PlantName","ProductionLine","ShiftNumber","_endTime","_startTime"],"visualOptions":{"hideTileTitle":false,"multiStat__textSize":"large","multiStat__valueColumn":{"type":"infer"},"colorRulesDisabled":false,"colorRules":[{"id":"d2aebb51-45e5-46ab-9b3e-2a15d538a393","column":{"type":"infer"},"conditions":[{"operator":">","value":"0"}],"color":"yellow","indicator":{"kind":"text","text":{"type":"infer"}}},{"id":"f74e1c12-9d7c-4c50-83dd-63afc48230ea","column":{"type":"infer"},"conditions":[{"operator":"==","value":"0"}],"color":"green","indicator":{"kind":"text","text":{"type":"infer"}}}],"colorStyle":"bold"}},{"id":"53532955-f0b9-4716-a73b-c3c915868572","title":"Quality","query":"boltmaker\n| where plantName == (['PlantName'])\n| where productionLine == (['ProductionLine']) \n| where shiftNumber == (['ShiftNumber'])\n| where messageTimestamp between (['_startTime'] .. ['_endTime']) \n| summarize totalPartsMade = sum(round(totalPartsMade,2)), defectivePartsMade = sum(round(defectivePartsMade,2))\n| extend Quality = iff(totalPartsMade>0,(totalPartsMade -  defectivePartsMade)*100/totalPartsMade,0.00)  \n|project round(Quality,2)\n| project strcat(tostring(Quality), \"%\") ;","dataSourceId":"a02cb359-5c59-494a-83f1-f1f944765ab6","visualType":"card","pageId":"ad90b412-c0d6-47b5-a71d-91f423dfcbc8","layout":{"x":10,"y":0,"width":5,"height":3},"usedParamVariables":["PlantName","ProductionLine","ShiftNumber","_endTime","_startTime"],"visualOptions":{"hideTileTitle":false,"multiStat__textSize":"large","multiStat__valueColumn":{"type":"infer"},"colorRulesDisabled":false,"colorRules":[{"id":"da10bbb3-7603-4733-ab8e-7eb149016c39","column":{"type":"infer"},"conditions":[{"operator":"<","value":"90"}],"color":"red","indicator":{"kind":"text","text":{"type":"infer"}}},{"id":"b2fc84c0-8f73-4559-99a0-8291e365b910","column":{"type":"infer"},"conditions":[{"operator":">","value":"90"}],"color":"green","indicator":{"kind":"text","text":{"type":"infer"}}}],"colorStyle":"light"}},{"id":"399928fb-0ae8-4323-a245-1f2715e2cc92","title":"Performance","query":"let healthcalc = boltmaker\n| where plantName == (['PlantName'])\n| where productionLine == (['ProductionLine']) \n| where shiftNumber == (['ShiftNumber'])\n| where messageTimestamp between (['_startTime'] .. ['_endTime']) \n| where machineHealth == 'Healthy'\n| count |extend CommonCol=\"Dummy\"   \n| project CommonCol, healthcount = Count; \nlet warningcalc = boltmaker\n| where plantName == (['PlantName'])\n| where productionLine == (['ProductionLine']) \n| where shiftNumber == (['ShiftNumber'])\n| where messageTimestamp between (['_startTime'] .. ['_endTime']) \n| where machineHealth == 'Warning'\n| count |extend CommonCol=\"Dummy\"   \n| project CommonCol, warningcount = Count; \nlet errorcalc = boltmaker\n| where plantName == (['PlantName'])\n| where productionLine == (['ProductionLine']) \n| where shiftNumber == (['ShiftNumber'])\n| where messageTimestamp between (['_startTime'] .. ['_endTime']) \n| where machineHealth == 'Error'\n| count |extend CommonCol=\"Dummy\"   \n| project CommonCol, errorcount = Count; \nhealthcalc  \n| join warningcalc on CommonCol | join errorcalc on CommonCol  \n| project performance = iff((healthcount + warningcount + errorcount)>0,round((healthcount*100/(healthcount + warningcount + errorcount)),2),0.00)\n| project strcat(tostring(performance), \"%\") ;\n","dataSourceId":"a02cb359-5c59-494a-83f1-f1f944765ab6","visualType":"card","pageId":"ad90b412-c0d6-47b5-a71d-91f423dfcbc8","layout":{"x":19,"y":0,"width":5,"height":3},"usedParamVariables":["PlantName","ProductionLine","ShiftNumber","_endTime","_startTime"],"visualOptions":{"hideTileTitle":false,"multiStat__textSize":"large","multiStat__valueColumn":{"type":"infer"},"colorRulesDisabled":false,"colorRules":[{"id":"da10bbb3-7603-4733-ab8e-7eb149016c39","column":{"type":"infer"},"conditions":[{"operator":"<","value":"90"}],"color":"red","indicator":{"kind":"text","text":{"type":"infer"}}},{"id":"b2fc84c0-8f73-4559-99a0-8291e365b910","column":{"type":"infer"},"conditions":[{"operator":">","value":"90"}],"color":"green","indicator":{"kind":"text","text":{"type":"infer"}}}],"colorStyle":"light"}},{"id":"5659ce06-3abc-4767-ba69-0d3df24cf247","title":"OEEE","query":"let healthcalc = boltmaker\n| where plantName == (['PlantName'])\n| where productionLine == (['ProductionLine']) \n| where shiftNumber == (['ShiftNumber'])\n| where messageTimestamp between (['_startTime'] .. ['_endTime']) \n| where machineHealth == 'Healthy'\n| count |extend CommonCol=\"Dummy\"   \n| project CommonCol, healthcount = Count; \nlet errorcalc = boltmaker\n| where plantName == (['PlantName'])\n| where productionLine == (['ProductionLine']) \n| where shiftNumber == (['ShiftNumber'])\n| where messageTimestamp between (['_startTime'] .. ['_endTime']) \n| where machineHealth == 'Error'\n| count |extend CommonCol=\"Dummy\"   \n| project CommonCol, errorcount = Count; \nlet warningcalc = boltmaker\n| where plantName == (['PlantName'])\n| where productionLine == (['ProductionLine']) \n| where shiftNumber == (['ShiftNumber'])\n| where messageTimestamp between (['_startTime'] .. ['_endTime']) \n| where machineHealth == 'Warning'\n| count |extend CommonCol=\"Dummy\"   \n| project CommonCol, warningcount = Count; \nlet qualitycalc = boltmaker\n| where plantName == (['PlantName'])\n| where productionLine == (['ProductionLine']) \n| where shiftNumber == (['ShiftNumber'])\n| where messageTimestamp between (['_startTime'] .. ['_endTime']) \n| summarize totalPartsMade = sum(round(totalPartsMade,2)), defectivePartsMade = sum(round(defectivePartsMade,2))\n| extend Quality = iff(totalPartsMade>0,(totalPartsMade -  defectivePartsMade)*100/totalPartsMade,0.00)  \n| extend CommonCol=\"Dummy\"   \n| project CommonCol, Quality ;\nlet energycalc = boltmaker\n| where plantName == (['PlantName'])\n| where productionLine == (['ProductionLine']) \n| where shiftNumber == (['ShiftNumber'])\n| where messageTimestamp between (['_startTime'] .. ['_endTime']) \n| summarize totalKwHusage = sum(round(kwh,2)), plannedEnergy = sum(round(plannedkwh,2))\n| extend Energy = iff(totalKwHusage>0,(totalKwHusage -  plannedEnergy)*100/totalKwHusage,0.00)  \n| extend CommonCol=\"Dummy\"   \n| project CommonCol, Energy ;\nhealthcalc   \n| join warningcalc on CommonCol\n| join errorcalc on CommonCol\n| join qualitycalc on CommonCol\n| join energycalc on CommonCol\n| extend Availability = (healthcount -  errorcount)*100/healthcount  \n| extend Performance = iff((healthcount + warningcount + errorcount)>0,round(healthcount*100/(healthcount + warningcount + errorcount),2),0.00)\n| extend OEEE = (Performance+Quality+Availability+Energy)/4\n| project strcat(tostring(round(OEEE,2)), \"%\");  \n","dataSourceId":"a02cb359-5c59-494a-83f1-f1f944765ab6","visualType":"card","pageId":"ad90b412-c0d6-47b5-a71d-91f423dfcbc8","layout":{"x":0,"y":0,"width":5,"height":6},"usedParamVariables":["PlantName","ProductionLine","ShiftNumber","_endTime","_startTime"],"visualOptions":{"hideTileTitle":false,"multiStat__textSize":"auto","multiStat__valueColumn":{"type":"infer"},"colorRulesDisabled":false,"colorRules":[{"id":"da10bbb3-7603-4733-ab8e-7eb149016c39","column":{"type":"infer"},"conditions":[{"operator":"<","value":"90"}],"color":"red","indicator":{"kind":"text","text":{"type":"infer"}}},{"id":"b2fc84c0-8f73-4559-99a0-8291e365b910","column":{"type":"infer"},"conditions":[{"operator":">","value":"90"}],"color":"green","indicator":{"kind":"text","text":{"type":"infer"}}}],"colorStyle":"bold"}},{"id":"245f6572-65c5-4397-8136-689f208b6bd0","title":"kWh","query":"boltmaker\n| where plantName == (['PlantName'])\n| where productionLine == (['ProductionLine']) \n| where shiftNumber == (['ShiftNumber'])\n| where messageTimestamp between (['_startTime'] .. ['_endTime']) \n| project messageTimestamp, kwh","dataSourceId":"a02cb359-5c59-494a-83f1-f1f944765ab6","visualType":"line","pageId":"ad90b412-c0d6-47b5-a71d-91f423dfcbc8","layout":{"x":4,"y":13,"width":8,"height":7},"usedParamVariables":["PlantName","ProductionLine","ShiftNumber","_endTime","_startTime"],"visualOptions":{"hideTileTitle":false,"multipleYAxes":{"base":{"id":"-1","label":"kwH","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[{"id":"12f9f16d-14c7-4608-917b-1fb75506dcc8","value":80}]},"additional":[]},"hideLegend":false,"xColumnTitle":"Date Time","xColumn":{"type":"infer"},"yColumns":{"type":"infer"},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[{"interaction":"column","property":"kwh","parameterId":"720dee87-1e85-459c-81d2-d00f47b8d9aa","disabled":false}],"drillthrough":[]}},{"id":"a4358012-c721-44a8-82b1-93c91015cafd","title":"Max kWh","query":"boltmaker\n| where plantName == (['PlantName'])\n| where productionLine == (['ProductionLine']) \n| where shiftNumber == (['ShiftNumber'])\n| where messageTimestamp between (['_startTime'] .. ['_endTime']) \n| summarize kwh = max(round(kwh,2))","dataSourceId":"a02cb359-5c59-494a-83f1-f1f944765ab6","visualType":"card","pageId":"ad90b412-c0d6-47b5-a71d-91f423dfcbc8","layout":{"x":0,"y":13,"width":4,"height":3},"usedParamVariables":["PlantName","ProductionLine","ShiftNumber","_endTime","_startTime"],"visualOptions":{"hideTileTitle":false,"multiStat__textSize":"large","multiStat__valueColumn":{"type":"infer"},"colorRulesDisabled":false,"colorRules":[{"id":"a98eda21-1741-4bb3-9658-a50d7fbb147d","column":{"type":"infer"},"conditions":[{"operator":"<","value":"79.5"}],"color":"green","indicator":{"kind":"text","text":{"type":"infer"}}},{"id":"7f4559bd-4610-4032-a95a-3e4e9b7f6bf7","column":{"type":"infer"},"conditions":[{"operator":">=","value":"79.6"}],"color":"red","indicator":{"kind":"text","text":{"type":"infer"}}}],"colorStyle":"light"}},{"id":"4cb135fb-e08e-4556-a77c-3dc312edd14b","title":"Forecast energy usage per machine","query":"let min_t = _startTime;\nlet max_t = _endTime;\nlet dt = 1h;\nlet horizon=2d;\nboltmaker\n| make-series num=avg(kwh) on messageTimestamp from min_t to max_t+horizon step dt by deviceId \n| extend forecast = series_decompose_forecast(num, toint(horizon/dt))\n| render timechart with(title='kwH forecast')","dataSourceId":"a02cb359-5c59-494a-83f1-f1f944765ab6","visualType":"line","pageId":"ad90b412-c0d6-47b5-a71d-91f423dfcbc8","layout":{"x":12,"y":20,"width":10,"height":7},"usedParamVariables":["_endTime","_startTime"],"visualOptions":{"hideTileTitle":false,"multipleYAxes":{"base":{"id":"-1","label":"kWh","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[]},"hideLegend":false,"xColumnTitle":"date","xColumn":{"type":"specified","value":"messageTimestamp"},"yColumns":{"type":"specified","value":["forecast"]},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[]}},{"id":"8613f0e0-d762-44c4-88ed-a3a46ddbb797","title":"Forecast CO2 emissions","query":"let min_t = _startTime;\nlet max_t = _endTime;\nlet dt = 4h;\nlet horizon=2d;\nboltmaker\n| extend emission = (kwh * 0.233)\n| make-series num=avg(emission) on messageTimestamp from min_t to max_t+horizon step dt by deviceId \n| extend forecast = series_decompose_forecast(num, toint(horizon/dt))\n| render timechart with(title='kwH forecast')","dataSourceId":"a02cb359-5c59-494a-83f1-f1f944765ab6","visualType":"line","pageId":"ad90b412-c0d6-47b5-a71d-91f423dfcbc8","layout":{"x":12,"y":13,"width":10,"height":7},"usedParamVariables":["_endTime","_startTime"],"visualOptions":{"hideTileTitle":false,"multipleYAxes":{"base":{"id":"-1","label":"kg","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[]},"hideLegend":false,"xColumnTitle":"date","xColumn":{"type":"specified","value":"messageTimestamp"},"yColumns":{"type":"specified","value":["forecast"]},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[]}},{"id":"3e3bf633-3e5e-4463-a880-18f6c89355c2","title":"Anomaly of machines ","query":"let min_t = _startTime;\nlet max_t = _endTime;\nlet dt = 1h;\nlet horizon=2d;\nboltmaker\n| make-series num=avg(kwh) on messageTimestamp from min_t to max_t step dt by deviceId \n| extend (anomalies, score, baseline) = series_decompose_anomalies(num, 1.5, -1, 'linefit')\n| render anomalychart with(anomalycolumns=anomalies, title='Anomalies kWh usage per machine')","dataSourceId":"a02cb359-5c59-494a-83f1-f1f944765ab6","visualType":"anomalychart","pageId":"ad90b412-c0d6-47b5-a71d-91f423dfcbc8","layout":{"x":14,"y":6,"width":10,"height":7},"usedParamVariables":["_endTime","_startTime"],"visualOptions":{"hideTileTitle":false,"multipleYAxes":{"base":{"id":"-1","label":"score","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[]},"hideLegend":false,"xColumnTitle":"date","xColumn":{"type":"specified","value":"messageTimestamp"},"yColumns":{"type":"specified","value":["forecast"]},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[]}},{"id":"a29db6df-de78-4dd5-88a1-62724ff7cbb6","title":"Energy","query":"boltmaker\n| where plantName == (['PlantName'])\n| where productionLine == (['ProductionLine']) \n| where shiftNumber == (['ShiftNumber'])\n| where messageTimestamp between (['_startTime'] .. ['_endTime']) \n| summarize totalKwHusage = sum(round(kwh,2)), plannedEnergy = sum(round(plannedkwh,2))\n| extend Energy = iff(totalKwHusage>0,(totalKwHusage -  plannedEnergy)*100/totalKwHusage,0.00)  \n|project round(Energy,2)\n| project strcat(tostring(Energy), \"%\") ;","dataSourceId":"a02cb359-5c59-494a-83f1-f1f944765ab6","visualType":"card","pageId":"ad90b412-c0d6-47b5-a71d-91f423dfcbc8","layout":{"x":5,"y":0,"width":5,"height":3},"usedParamVariables":["PlantName","ProductionLine","ShiftNumber","_endTime","_startTime"],"visualOptions":{"hideTileTitle":false,"multiStat__textSize":"large","multiStat__valueColumn":{"type":"infer"},"colorRulesDisabled":false,"colorRules":[{"id":"da10bbb3-7603-4733-ab8e-7eb149016c39","column":{"type":"infer"},"conditions":[{"operator":"<","value":"90"}],"color":"red","indicator":{"kind":"text","text":{"type":"infer"}}},{"id":"b2fc84c0-8f73-4559-99a0-8291e365b910","column":{"type":"infer"},"conditions":[{"operator":">","value":"90"}],"color":"green","indicator":{"kind":"text","text":{"type":"infer"}}}],"colorStyle":"light"}}],"dataSources":[{"id":"a02cb359-5c59-494a-83f1-f1f944765ab6","name":"oeeethesis.westeurope","clusterUri":"https://oeeethesis.westeurope.kusto.windows.net/","database":"boltmaker","kind":"manual-kusto","scopeId":"kusto"}],"schema_version":"22","autoRefresh":{"enabled":false},"parameters":[{"kind":"duration","id":"1b544636-4191-4f3b-a30c-f9446ef1cd87","displayName":"Time range","beginVariableName":"_startTime","endVariableName":"_endTime","defaultValue":{"kind":"dynamic","count":15,"unit":"minutes"},"showOnPages":{"kind":"all"}},{"kind":"string","id":"720dee87-1e85-459c-81d2-d00f47b8d9aa","displayName":"Plant Name","variableName":"PlantName","selectionType":"single-all","defaultValue":{"kind":"value","value":"FoodFactory"},"dataSource":{"kind":"query","consumedVariables":["_endTime","_startTime"],"query":"boltmaker\n| where messageTimestamp between (['_startTime'] .. ['_endTime']) \n| project  PlantName = plantName\n| distinct PlantName\n| order by PlantName asc","dataSourceId":"a02cb359-5c59-494a-83f1-f1f944765ab6","columns":{"value":"PlantName"}},"showOnPages":{"kind":"all"}},{"kind":"string","id":"8d1eea67-c62a-4447-b0ce-162f5c85a31f","displayName":"Production Line","variableName":"ProductionLine","selectionType":"single-all","defaultValue":{"kind":"value","value":"ProductionLine 1"},"dataSource":{"kind":"query","consumedVariables":["PlantName","_endTime","_startTime"],"query":"boltmaker\n| where plantName == (['PlantName'])\n| where messageTimestamp between (['_startTime'] .. ['_endTime'])\n| project  ProductionLine = productionLine\n| distinct ProductionLine\n| order by ProductionLine asc","dataSourceId":"a02cb359-5c59-494a-83f1-f1f944765ab6","columns":{"value":"ProductionLine"}},"showOnPages":{"kind":"all"}},{"kind":"int64","id":"443ba231-a72e-4e60-b4e1-637fa1e3e2be","displayName":"Shift","variableName":"ShiftNumber","selectionType":"single-all","defaultValue":{"kind":"value","value":"2"},"dataSource":{"kind":"query","consumedVariables":["PlantName","ProductionLine","_endTime","_startTime"],"query":"boltmaker\n| where plantName == (['PlantName'])\n| where productionLine == (['ProductionLine'])\n| where messageTimestamp between (['_startTime'] .. ['_endTime']) \n| project  ShiftNumber = shiftNumber\n| distinct ShiftNumber\n| order by ShiftNumber asc","dataSourceId":"a02cb359-5c59-494a-83f1-f1f944765ab6","columns":{"value":"ShiftNumber"}},"showOnPages":{"kind":"all"}}],"pages":[{"name":"Page 1","id":"ad90b412-c0d6-47b5-a71d-91f423dfcbc8"}]}